(()=>{"use strict";function e(e){console.log(`[Contex.ly Content] ${e}`)}console.log("=== Contex.ly Content Script Started ===");const t=document.createElement("div");t.style.cssText="\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  background: #4CAF50;\n  color: white;\n  padding: 10px;\n  border-radius: 4px;\n  z-index: 10000;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n",t.textContent="Contex.ly loaded!",document.body.appendChild(t),setTimeout((()=>t.remove()),3e3);let n="";document.addEventListener("mouseup",(t=>{e("mouseup event triggered");const o=window.getSelection();if(e(`Selection object exists: ${!!o}`),n=(null==o?void 0:o.toString().trim())||"",e(`Raw selection text: "${null==o?void 0:o.toString()}"`),e(`Trimmed selection text: "${n}"`),n){e(`Text selected: "${n.substring(0,50)}..."`);const t=document.createElement("div");t.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: #2196F3;\n      color: white;\n      padding: 10px;\n      border-radius: 4px;\n      z-index: 10000;\n      max-width: 300px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    ",t.textContent=`Selected: ${n.substring(0,50)}...`,document.body.appendChild(t),setTimeout((()=>t.remove()),2e3)}else e("No text selected after trim")}));const o=document.createElement("div");o.id="contex-ly-result",o.style.cssText="\n  position: fixed;\n  z-index: 10000;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  padding: 16px;\n  max-width: 400px;\n  display: none;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n",document.body.appendChild(o),e("Result container ready"),chrome.runtime.onMessage.addListener(((t,n,o)=>{if(e(`Received message: ${JSON.stringify(t)}`),"showResult"===t.action){const e=document.createElement("div");e.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: #2196F3;\n      color: white;\n      padding: 10px;\n      border-radius: 4px;\n      z-index: 10000;\n      max-width: 300px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    ",e.textContent=t.result,document.body.appendChild(e),setTimeout((()=>e.remove()),3e3),o({status:"success"})}return!0})),document.addEventListener("mousedown",(t=>{"block"!==o.style.display||o.contains(t.target)||(o.style.display="none",e("Result popup closed"))}))})();